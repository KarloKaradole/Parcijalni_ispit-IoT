{% extends 'base.html' %}

{% block page_content %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Current Weather Outside</h1>
    <div class="col-md-8">
        <ul class="list-group">
            <li class="list-group-item">DATE AND TIME: {{ current_date_and_time }}</li>
            <li class="list-group-item">LOCATION: {{ "Å ibenik" }}</li>
            <li class="list-group-item">TEMPERATURE: {{ temperature }}</li>
            <li class="list-group-item">PRESSURE: {{ pressure }}</li>
            <li class="list-group-item">HUMIDITY: {{ humidity }}</li>
            <li class="list-group-item">PREPORUKA: {{ clothes_recommendation }}</li>
        </ul>
    </div>
</div>


<div class="border-bottom" style="margin-bottom: 20px;">
<h2>Today's Weather Forecast Graphs</h2>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<style>
    .chart-container {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
    }
    .chart {
            max-width: calc(100vw / 3 - 20px); /* Adjust margin as needed */
            width: 100%; /* Set width to fill container */
            margin-right: 10px; /* Add margin between charts */
            height: 80px;
        }
</style>
</head>
<body>
<div class="chart-container">
    <canvas id="chart1" class="chart"></canvas>
    <canvas id="chart2" class="chart"></canvas>
    <canvas id="chart3" class="chart"></canvas>
</div>

<script>
    const xValues = ["00:00", "01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00"];

    const dailyTempData = {{daily_temp}};
    const dailyPresData = {{daily_pres}};
    const dailyHumData = {{daily_hum}};

    const createChart = (canvasId, data, label, borderColor) => {
        new Chart(canvasId, {
            type: "line",
            data: {
                labels: xValues,
                datasets: [{
                    label: label,
                    data: data,
                    borderColor: borderColor,
                    fill: false
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: false
                        }
                    }]
                },
                legend: { display: true }
            }
        });
    };

    createChart('chart1', dailyTempData, 'Temperature', 'red');
    createChart('chart2', dailyPresData, 'Pressure', 'green');
    createChart('chart3', dailyHumData, 'Humidity', 'blue');
</script>
</div>

<h3 style="font-size: 32px;">Yesterday's Sensor Data</h3>
<div class="table-responsive small">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th scope="col">{{ yesterday_date }}</th>
                <th scope="col">Temperature</th>
                <th scope="col">Pressure</th>
                <th scope="col">Humidity</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>00:00</td>
                <td>{{daily_temp[0]}} &deg;C</td>
                <td>{{daily_pres[0]}} hPA</td>
                <td>{{daily_hum[0]}} %</td>
            </tr>
            <tr>
                <td>01:00</td>
                <td>{{daily_temp[1]}} &deg;C</td>
                <td>{{daily_pres[1]}} hPa</td>
                <td>{{daily_hum[1]}} %</td>
            </tr>
            <tr>
                <td>02:00</td>
                <td>{{daily_temp[2]}} &deg;C</td>
                <td>{{daily_pres[2]}} hPa</td>
                <td>{{daily_hum[2]}} %</td>
            </tr>
            <tr>
                <td>03:00</td>
                <td>{{daily_temp[3]}} &deg;C</td>
                <td>{{daily_pres[3]}} hPa</td>
                <td>{{daily_hum[3]}} %</td>
            </tr>
            <tr>
                <td>04:00</td>
                <td>{{daily_temp[4]}} &deg;C</td>
                <td>{{daily_pres[4]}} hPa</td>
                <td>{{daily_hum[4]}} %</td>
            </tr>
            <tr>
                <td>05:00</td>
                <td>{{daily_temp[5]}} &deg;C</td>
                <td>{{daily_pres[5]}} hPa</td>
                <td>{{daily_hum[5]}} %</td>
            </tr>
            <tr>
                <td>06:00</td>
                <td>{{daily_temp[6]}} &deg;C</td>
                <td>{{daily_pres[6]}} hPa</td>
                <td>{{daily_hum[6]}} %</td>
            </tr>
            <tr>
                <td>07:00</td>
                <td>{{daily_temp[7]}} &deg;C</td>
                <td>{{daily_pres[7]}} hPa</td>
                <td>{{daily_hum[7]}} %</td>
            </tr>
            <tr>
                <td>08:00</td>
                <td>{{daily_temp[8]}} &deg;C</td>
                <td>{{daily_pres[8]}} hPa</td>
                <td>{{daily_hum[8]}} %</td>
            </tr>
            <tr>
                <td>09:00</td>
                <td>{{daily_temp[9]}} &deg;C</td>
                <td>{{daily_pres[9]}} hPa</td>
                <td>{{daily_hum[9]}} %</td>
            </tr>
            <tr>
                <td>10:00</td>
                <td>{{daily_temp[10]}} &deg;C</td>
                <td>{{daily_pres[10]}} hPa</td>
                <td>{{daily_hum[10]}} %</td>
            </tr>
            <tr>
                <td>11:00</td>
                <td>{{daily_temp[11]}} &deg;C</td>
                <td>{{daily_pres[11]}} hPa</td>
                <td>{{daily_hum[11]}} %</td>
            </tr>
            <tr>
                <td>12:00</td>
                <td>{{daily_temp[12]}} &deg;C</td>
                <td>{{daily_pres[12]}} hPa</td>
                <td>{{daily_hum[12]}} %</td>
            </tr>
            <tr>
                <td>13:00</td>
                <td>{{daily_temp[13]}} &deg;C</td>
                <td>{{daily_pres[13]}} hPa</td>
                <td>{{daily_hum[13]}} %</td>
            </tr>
            <tr>
                <td>14:00</td>
                <td>{{daily_temp[14]}} &deg;C</td>
                <td>{{daily_pres[14]}} hPa</td>
                <td>{{daily_hum[14]}} %</td>
            </tr>
            <tr>
                <td>15:00</td>
                <td>{{daily_temp[15]}} &deg;C</td>
                <td>{{daily_pres[15]}} hPa</td>
                <td>{{daily_hum[15]}} %</td>
            </tr>
            <tr>
                <td>16:00</td>
                <td>{{daily_temp[16]}} &deg;C</td>
                <td>{{daily_pres[16]}} hPa</td>
                <td>{{daily_hum[16]}} %</td>
            </tr>
            <tr>
                <td>17:00</td>
                <td>{{daily_temp[17]}} &deg;C</td>
                <td>{{daily_pres[17]}} hPa</td>
                <td>{{daily_hum[17]}} %</td>
            </tr>
            <tr>
                <td>18:00</td>
                <td>{{daily_temp[18]}} &deg;C</td>
                <td>{{daily_pres[18]}} hPa</td>
                <td>{{daily_hum[18]}} %</td>
            </tr>
            <tr>
                <td>19:00</td>
                <td>{{daily_temp[19]}} &deg;C</td>
                <td>{{daily_pres[19]}} hPa</td>
                <td>{{daily_hum[19]}} %</td>
            </tr>
            <tr>
                <td>20:00</td>
                <td>{{daily_temp[20]}} &deg;C</td>
                <td>{{daily_pres[20]}} hPa</td>
                <td>{{daily_hum[20]}} %</td>
            </tr>
            <tr>
                <td>21:00</td>
                <td>{{daily_temp[21]}} &deg;C</td>
                <td>{{daily_pres[21]}} hPa</td>
                <td>{{daily_hum[21]}} %</td>
            </tr>
            <tr>
                <td>22:00</td>
                <td>{{daily_temp[22]}} &deg;C</td>
                <td>{{daily_pres[22]}} hPa</td>
                <td>{{daily_hum[22]}} %</td>
            </tr>
            <tr>
                <td>23:00</td>
                <td>{{daily_temp[23]}} &deg;C</td>
                <td>{{daily_pres[23]}} hPa</td>
                <td>{{daily_hum[23]}} %</td>
            </tr>
        </tbody>
    </table>
</div>

{% endblock %}